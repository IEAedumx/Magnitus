<tarea id="autorizaRecPreIngTarea" nombre="Autoriza Reclasificación Presupuestal del Ingreso" autor="HMVG">
    <pagina id="1">
        <!-- INICIAR PARAMETROS -->
        <nivel id="inParams" nombre="inParams" interactivo="false">
            <componente id="inParams" nombre="inParams" tipo="cursor">
                <tabla schema="catalog" nombre="dummy">
                    <campo name="id" filtroCampo="id" filtroOperador="=" filtroValor="1"/>
                    <campo name="ur" text="UR" local="true" type="string" calc="$inParam.ur$" />
                    <campo name="periodo" text="Periodo" local="true" type="string" calc="$inParam.periodo$"/>
                    <campo name="id_folio_duri_pres" text="Folio Presupuestal Aux" local="true" type="string" calc="$inParam.id_folio_duri_pres$"/>
                    <campo name="id_folio_duri" text="Folio  Presupuestal" local="true" type="string" calc="$inParam.id_folio_duri$"/>
                    <campo name="folio_duri_recaudado" local="true" type="string" calc="$inParam.folio_duri_recaudado$"/>
                </tabla>
            </componente>
        </nivel>
        
        <!-- OBTENER USUARIO -->
        <nivel id="barreUsuarios" nombre="barreUsuarios" interactivo="false">
            <componente id="barreUsuarios" nombre="barreUsuarios" tipo="cursor">
                <tabla schema="entity" nombre="usuario">
                    <campo name="id_unidad_responsable" filtroCampo="id_unidad_responsable" filtroOperador="=" 
                        filtroValor="%inParams.inParams.ur%"/>
                    <campo name="id_usuario"/>
                    <campo name="permisos_especiales"/>
                    <campo name="nombre_usuario" filtroCampo="nombre_usuario" filtroOperador="=" filtroValor="$protocolarios.user$"/>
                </tabla>
            </componente>
        </nivel>
        <!-- NIVEL TABLA CONSULTA RECLASIFICACION PRESUPUESTAL DEL INGRESO 
        <nivel id="agRecPreIn" nombre="Consulta Clave Origen de Recaudación a Reclasificar" mostrarNivelAnterior="false" mostrarProximoNivel="false">
            <componente id="agRecPreIn" nombre="Consulta Clave Origen de Recaudación a Reclasificar" tipo="tabla" filtro="false" mostrarEliminar="false" mostrarEditar="false" mostrarAgregar="false">
                <tabla schema="operation" nombre="recaudacion_registro_detalle">
                    <campo name="ur" text="Unidad Responsable" llaveForanea="false" visible="false" columna-visible="false" calc="%inParams.inParams.ur%"/>
                    <campo name="periodo" text="Periodo" llaveForanea="false" visible="false" columna-visible="false" calc="%inParams.inParams.periodo%"/>
                    <campo name="id_recaudacion_registro" text="id folio duri pres" visible="true" llaveForanea="false" columna-visible="false" width="150" calc="%inParams.inParams.folio_duri_recaudado%"/>
                    <campo name="id_recaudacion_registro_det" text="Renglón" width="85"/>
                    <campo name="folio_duri_pres" text="Renglón" local="true" type="string" calc="%inParams.inParams.id_folio_duri_pres%" width="150" columna-visible="false"/>
                    <campo name="id_folio_duri_pres" text="ID FOLIO Recaudación" visible="true" width="150" columna-visible="false" calc="%inParams.inParams.id_folio_duri_pres%" local="true" type="long"/>
                    <campo name="id_cat_cri" text="ID CRI"  llaveForanea="false" visible="false" columna-visible="false" />
                    <campo name="id_cri" text="Clasificador por Rubro del Ingreso" width="250" descripcionForaneaTabla="id_cat,descripcion"/>
                    <campo name="id_cat_fondo_contable" text="ID FC" llaveForanea="false" visible="false" columna-visible="false"/>
                    <campo name="id_fondo_contable" text="Fondo Contable" width="200" descripcionForaneaTabla="id_cat,descripcion"/>
                    <campo name="id_cat_centro_registro" text="ID CR" llaveForanea="false" visible="false"  columna-visible="false"/>
                    <campo name="id_centro_registro" text="Centro de registro" width="200" descripcionForaneaTabla="id_cat,descripcion"/>
                    <campo name="mes" text="Mes" visible="false" columna-visible="false" llaveForanea="false"/>
                    <campo name="clave_presupuestal" text="Clave Presupuestal" width="200" llaveForanea="false" />
                    <campo name="cantidad" text="Cantidad" width="100" cellsalign="center"/>
                    <campo name="importe" text="Importe"  width="150" cellsalign="right" formatoMoneda="true"/>
                    <campo name="descuento" text="Descuento"  width="150" cellsalign="right" formatoMoneda="true"/>
                    <campo name="iva" text="IVA"  width="120" cellsalign="right" formatoMoneda="true"/>
                    <campo name="total" text="Total" width="150" cellsalign="right" formatoMoneda="true"/>
                    <tareas>
					   <tarea nombre="Gestiona Reclasificación" imagen="resources/img/button-default.png" imagen-sobre="resources/img/button-default-rollover.png"
					       params="ur,periodo,id_folio_duri_pres,id_recaudacion_registro,id_recaudacion_registro_det,mes,clave_presupuestal,id_cat_cri,id_cri" ref="task=54ec9a5f-1023-4966-991f-3b955f30fc3a"/>
				    </tareas>
                </tabla>
                <estilos>
		        <boton nombre="grabar" visible="true" texto="Continuar" margen-izquierdo="4" columnas="2" margen-derecho="4"/>
		        </estilos>
		        <acciones>
                    <accion nombre="grabar" hacer="saltar siguiente nivel"/>
                </acciones>
            </componente>
        </nivel>
        -->
        
        <!-- NIVEL MAESTRO DETALLE CONSULTA RECLASIFICACIÓN DEL INGRESO 
        <nivel id="autorizaRecPreIngNvMD" nombre="Consulta Reclasificación del Ingreso" mostrarProximoNivel="false" mostrarNivelAnterior="false">
           
            <componente id="autorizaRecPreIngCpMD" nombre="Consulta Reclasificación del Ingreso" tipo="maestroDetalle">
               <encabezado accionDefault="editar">
                   <tabla schema="operation" nombre="reclasificacion_presupuestal_ingreso">
                       <campo name="ur" text="ur" calc="%inParams.inParams.ur%" visible="false" columna-visible="false"/>
                       <campo name="periodo" text="periodo" calc="%inParams.inParams.periodo%" visible="false" columna-visible="false"/>
                       <campo name="id_folio_duri" text="ID Folio" llaveForanea="false" calc="%inParams.inParams.id_folio_duri%" 
                              visible="false" columna-visible="false"/>    
                       <campo name="folio_duri" text="Folio de Reclasificación" llaveForanea="false" columnas="3" margen-izquierdo="1" habilitado="false"/>
                       <campo name="fecha_registro" text="Fecha" columnas="3" habilitado="false"/>
                       <campo name="folio_recaudado" text="Folio Recuaudado" columnas="3" habilitado="false"/>
                       <campo name="tramite" text="Trámite" columnas="3" margen-izquierdo="1" habilitado="false"/>
                       <campo name="justificacion" text="Justificación" columnas="6" habilitado="false" />                 
                    </tabla>
                    <estilos>
                        <boton nombre="grabar" visible="false" texto="Continuar" columnas="3" margen-izquierdo="5" margen-derecho="2"/>
                    </estilos>
               </encabezado>
               <detalles accionDefault="editar" mostrarAgregar="false" mostrarEditar="false" mostrarEliminar="false">
                   <tabla schema="operation" nombre="reclasificacion_presupuestal_ingr_det" id="detallesRecPreIngMD" tituloDetalle="Renglones">
                       <campo name="ur" text="ur" llaveForanea="false" columna-visible="false"/>
                        <campo name="periodo" text="periodo" llaveForanea="false" columna-visible="false"/>
                        <campo name="folio_duri_pres" llaveForanea="false" text="Duri Reclasificación" columna-visible="false"/>
                        <campo name="folio_duri_pres_detalle" text="Renglón" width="85"/>
                        <campo name="id_cat_clas_rubro_ingreso_destino" text="ID CRI" habilitado="false" llaveForanea="false" columna-visible="false"/>
                        <campo name="clasificador_rubro_ingreso_destino" text="Clasificador por Rubro de Ingreso" descripcionForaneaTabla="id_cat,descripcion" width="250"/>
                        <campo name="id_cat_fondo_contable" text="id fondo contable" llaveForanea="false" columna-visible="false"/>
                        <campo name="fondo_contable" text="Fondo Contable" descripcionForaneaTabla="id_cat,descripcion" width="200"/>
                        <campo name="mes" text="mes Destino" llaveForanea="false" visible="false" columna-visible="false" />
                        <campo name="clave_presupuestal" text="Clave Presupuestal"  width="225" descripcionForaneaTabla="clave_presupuestal" llaveForanea="false"/>
                        <campo name="cantidad" text="Cantidad" width="100" cellsalign="center"/>
                        <campo name="importe" text="Importe" width="150" cellsalign="right" formatoMoneda="true"/>
                        <campo name="descuento" text="Descuento" width="150" cellsalign="right" formatoMoneda="true"/>
                        <campo name="iva" text="IVA" width="120" cellsalign="right" formatoMoneda="true"/>
                        <campo name="total" text="Total" width="150" cellsalign="right" formatoMoneda="true"/>
                        <campo name="reclasificacion_asig_bloque"  text="Reclasificación Asignación de Bloque" llaveForanea="false" columna-visible="false"/>
                        <campo name="tipo_bloque" text="Tipo de Bloque" llaveForanea="false" columna-visible="false"/>
                   </tabla>
                   <estilos>
                        <boton nombre="grabar" visible="true" texto="Continuar" columnas="4" margen-izquierdo="4" margen-derecho="2"/>
                   </estilos>
                   <acciones>
                        <accion nombre="grabar" hacer="saltar siguiente nivel"/>
                   </acciones>
               </detalles>
            </componente>
        </nivel>
        -->
        <!-- NIVEL REPORTE CONSULTA RECLASIFICACIÓN DEL INGRESO -->
        <nivel id="reporteAutRecPreIngNvRep" nombre="Consulta Reclasificación del Ingreso" mostrarNivelAnterior="false">
            <componente id="reporteAutRecPreIngCpRep" nombre="Documento Reclasificación del Ingreso" tipo="reporte">
                <reporte nombre="R_Rep_Ing_IJ">
                    <campo name="ur" type="long" calc="$inParam.ur$"/>
                    <campo name="periodo" type="long" calc="$inParam.periodo$"/>
                    <campo name="folio_duri" type="long" calc="%inParams.inParams.id_folio_duri%"/>
                    <campo name="usuario" type="string" calc="$protocolarios.user$"/>
                </reporte>  
            </componente>
        </nivel>
        
        <!-- NIVEL FORMULARIO AUTORIZA RECLASIFICACIÓN PRESUPUESTAL -->
        <nivel id="formularioAutRecPresIngNv" nombre="Autoriza Reclasificación del Ingreso" mostrarNivelAnterior="false" mostrarProximoNivel="false">
            <componente id="formularioAutRecPresIngCp" nombre="Autoriza Reclasificación del Ingreso" tipo="formulario" 
                        accionDefault="editar">
                <tabla schema="operation" nombre="reclasificacion_presupuestal_ingreso">
                    <campo name="ur" text="ur" calc="%inParams.inParams.ur%" visible="false" columna-visible="false"/>
                    <campo name="periodo" text="periodo" calc="%inParams.inParams.periodo%" visible="false" 
                                columna-visible="false"/>
                    <campo name="id_folio_duri" text="Folio" calc="%inParams.inParams.id_folio_duri%" 
                              visible="false" columna-visible="false"/> 
                    <campo name="autoriza" text="Autoriza" columnas="4" margen-izquierdo="3" margen-derecho="3"/>
                    <campo name="observaciones" text="Motivo de rechazo" 
                           interaccion="%autoriza%==false"
                           validacion="%autoriza%==false AND %observaciones%==null"
                           validacionMensaje="Favor de ingresar el motivo de rechazo"    
                           columnas="6" margen-izquierdo="2" margen-derecho="2" height="200"/>
                </tabla>
                 <estilos>
                    <boton nombre="grabar" texto="Continuar" visible="true" margen-izquierdo="4" columnas="2"  margen-derecho="4"/>
                </estilos>
                <acciones>
                    <accion nombre="grabar" hacer="saltar siguiente nivel"/>
                </acciones>
            </componente>
        </nivel>
        
        
        
        <!-- TURNAR INSTANCIA (NO AUTORIZA RPI) -->
        <nivel id="enlaceDynamo" nombre="turnarInstancia" interactivo="false" ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==false">
            <componente id="enlaceDynamo" nombre="Enlace con dynamo" tipo="solicitud">
                <parametros url="$config.request$" metodo="POST" accion="negociarInstancia" tipo="json">
                    <parametro name="enterprise" calc="$protocolarios.enterprise$"/>
                    <parametro name="process" calc="$protocolarios.process$"/>
                    <parametro name="version" calc="$protocolarios.version$"/>
                    <parametro name="instance" calc="$protocolarios.instance$"/>
                    <parametro name="user" calc="$protocolarios.user$"/>
                    <parametro name="url" calc="$protocolarios.url$"/>
                    <parametro name="reiniciarInstancia" calc="'true'" />
                </parametros>
            </componente>
        </nivel>
        
        <!-- ENVIAR MENSAJE DE MOTIVO DE RECHAZO (NO AUTORIZA RPI) -->
        <nivel id="instanciaVal" nombre="Instancia Validor" interactivo="false" ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==false">
           <componente id="instanciaVal" nombre="EnvioParametrosDynamo" tipo="solicitud"> 
               <parametros url="$config.request$" metodo="POST" accion="agregarMensaje" tipo="json">
                   <parametro name="enterprise" calc="$protocolarios.enterprise$"/> 
                   <parametro name="process" calc="$protocolarios.process$"/>    
                   <parametro name="version" calc="$protocolarios.version$"/> 
                   <parametro name="user" calc="$protocolarios.user$"/>  
                   <parametro name="instanceId" calc="$protocolarios.instance$"/> 
                   <parametro name="message" calc="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.observaciones%"/>
                   <parametro name="type" calc="'1'"/>
               </parametros> 
           </componente>
        </nivel>
        
        <!-- BARRIDO DE RECLASIFICACION DEL INGRESO -->
        <nivel id="barreRPI" nombre="barreRPI" interactivo="false" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
            <componente id="barreRPI" nombre="barreRPI" tipo="cursor">
                <tabla schema="operation" nombre="reclasificacion_presupuestal_ingreso">
                    <campo name="ur" filtroCampo="ur" filtroOperador="=" filtroValor="%inParams.inParams.ur%" />
                    <campo name="periodo" filtroCampo="periodo" filtroOperador="=" filtroValor="%inParams.inParams.periodo%" />
                    <campo name="id_folio_duri" filtroCampo="id_folio_duri" filtroOperador="=" 
                           filtroValor="%inParams.inParams.id_folio_duri%" />
                    <campo name="folio_duri"/>
                    <campo name="folio_recaudado" />
                    <campo name="tramite"/>
                    <campo name="fecha_registro" />
                    <campo name="estatus" />
                    <campo name="justificacion" />
                    <campo name="beneficiario"/>
                </tabla>
            </componente>
        </nivel>
        
        <!-- BARRIDO DEL RECAUDADO DE INGRESO -->
        <nivel id="barreDURIR" nombre="Barrido de Duri Recaudado" interactivo="false"
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
            <componente id="barreDURIR" nombre="barrido de Duri Recaudado" tipo="cursor">
                <tabla schema="operation" nombre="recaudacion_registro">
                    <campo name="ur" filtroCampo="ur" filtroOperador="=" filtroValor="%inParams.inParams.ur%"/>
                    <campo name="periodo" filtroCampo="periodo" filtroOperador="=" filtroValor="%inParams.inParams.periodo%"/>
                    <campo name="id_recaudacion_registro" filtroCampo="id_recaudacion_registro" filtroOperador="=" filtroValor="%barreRPI.barreRPI.folio_recaudado%"/>
                    <campo name="folio_asociado"/>
                    <campo name="referencia"/>
                    <campo name="fecha_recaudacion"/>
                    <campo name="forma_cobro" />
                    <campo name="cuenta_bancaria"/>
                    <campo name="importe_efectivo"/>
                    <campo name="importe_cheque"/>
                    <campo name="importe_tarjeta"/>
                    <campo name="importe_otra_forma_pago"/>
                    <campo name="importe_total_recaudar"/>
                    <campo name="tipo_ingreso"/>
                    <campo name="caja_recaudacion"/>
                    <campo name="importe_total"/>
                    <campo name="tipo_cuenta"/>
                    <campo name="estatus_reclasificacion" calc="2"/>
                </tabla>
            </componente>
        </nivel>
        
        <!-- PÓLIZAS -->
        <!-- NIVEL OBTENER ID DE SERPARADOR-->
        <nivel id="obIdSeparador" nombre="obtenerSeparadorPeriodo" interactivo="false" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
            <componente id="obIdSeparador" nombre="obtenerSeparadorPeriodo" tipo="cursor" >
                <tabla schema="catalog" nombre="periodo">
                <campo name="id_unidad_responsable" filtroCampo="id_unidad_responsable" filtroOperador="=" filtroValor="%inParams.inParams.ur%" llaveForanea="false"/>
                <campo name="id_periodo" filtroCampo="id_periodo" filtroOperador="=" filtroValor="%inParams.inParams.periodo%" llaveForanea="false"/>
                <campo name="id_separador"/>
                </tabla>
            </componente>
        </nivel>
        
        <!-- NIVEL OBTENER SEPARADOR --> 
        <nivel id="obSeparador" nombre="obtenerSeparadorPeriodo" interactivo="false" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true"> 
            <componente id="obSeparador" nombre="obtenerSeparadorPeriodo" tipo="cursor">
                <tabla schema="catalog" nombre="separador" >
                <campo name="id_separador" filtroCampo="id_separador" filtroOperador="=" filtroValor="%obIdSeparador.obIdSeparador.id_separador%"/>
                <campo name="caracter"/>
                </tabla>
            </componente>
        </nivel>
        
        <!-- ENCABEZADO DE PÓLIZA DE RECLACIFICACIÓN DEL INGRESO --> 
        <nivel id="encabezadoPolizaRPI" nombre="Encabezado de la Póliza de RPI" interactivo="false" 
               ejecutar="%barreRPI.barreRPI.ur%!=null AND %formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true"> 
            <componente id="encabezadoPolizaRPI" nombre="Generación del Encabezado de la Póliza de RPI" tipo="altaDirect">
                <tabla schema="operation" nombre="movimientos_auxiliares">
                    <campo name="ur" calc="%barreRPI.barreRPI.ur%"/>
                    <campo name="periodo" calc="%barreRPI.barreRPI.periodo%"/>
                    <campo name="folio_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                    <campo name="fecha_poliza" calc="@fechaSistema()"/>
                    <campo name="tipo_poliza" calc="1"/>  <!-- 1 DIARIO --> 
                    <campo name="momento_contable" calc="14"/>  <!-- 11 RECLASIFICACION DEL INGRESO --> 
                    <campo name="estatus_poliza" calc="2"/>  <!-- 2 AUTORIZADA --> 
                    <campo name="origen_poliza" calc="1"/>  <!-- 1 AUTOMATICA -->
                    <!-- <campo name="duep_origen" calc=""/> -->   
                    <!-- <campo name="fondo_contable" calc=""/> NO ESTA EN LA TABLA RPI-->
                    <campo name="id_beneficiario_ganador" calc="%barreRPI.barreRPI.beneficiario%"/>
                    <campo name="concepto_general" 
                           calc="@concatenar('Póliza de Reclasificación del Ingreso '+ %barreRPI.barreRPI.folio_duri%)"/>
                    <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/> 
                </tabla>
            </componente>
        </nivel>
        <!-- AGREGAR EL FOLIO AL ENCABEZADO DE LA POLIZA RPI -->
        <nivel id="agregaFolioPolizaRPI" nombre="Agrega fólio a Poliza de RPI" interactivo="false" 
                ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
			<componente id="agregaFolioPolizaComp" nombre="Agrega fólio a Poliza de RPI" tipo="cursor">
				<tabla schema="operation" nombre="movimientos_auxiliares">
					<campo name="ur" filtroCampo="ur" filtroOperador="=" filtroValor="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
					<campo name="periodo" filtroCampo="periodo" filtroOperador="=" 
					       filtroValor="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
					<campo name="folio_movimiento_auxiliar" filtroCampo="folio_movimiento_auxiliar" filtroOperador="=" 
					       filtroValor="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
					<campo name="folio_reporte" calc="@concatenar(%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%+'-'+
    					@ifThenElse(%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar% &lt;10,'00000',
    					@ifThenElse(%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%&lt;100,'0000',
    					@ifThenElse(%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%&lt;1000,'000',
    					@ifThenElse(%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%&lt;10000,'00',
    					@ifThenElse(%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%&lt;100000,'0','1')))))
					               +%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%)"/>
				</tabla>
			</componente>
		</nivel>
        
        
        <!-- DETALLES DE PÓLIZA DE RECLASIFICACIÓN PPRESUPUESTAL DE INGRESO --> 
        <nivel id="detallesPolizaRPINv" nombre="Detalles de Póliza RPI Nv" interactivo="false" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
            <componente id="detallesPolizaRPICp" nombre="Detalles de Póliza RPI Cp" tipo="cursor">
                <tabla schema="operation" nombre="reclasificacion_presupuestal_ingr_det">
                    <campo name="ur" filtroCampo="ur" filtroOperador="=" filtroValor="%barreRPI.barreRPI.ur%" />
                    <campo name="periodo" filtroCampo="periodo" filtroOperador="=" filtroValor="%barreRPI.barreRPI.periodo%" />
                    <campo name="folio_duri_pres" filtroCampo="folio_duri_pres" filtroOperador="=" filtroValor="%barreRPI.barreRPI.id_folio_duri%" />
                    <campo name="folio_duri_pres_detalle"/>
                    <campo name="total"/>
                    <campo name="mes"/>
                    <campo name="clave_presupuestal"/>
                </tabla>
                
                
                <!-- INICIO Afectacion PATRIMONIAL-->
                <!--<nivel id="cargoDIAPat" nombre="Cargo Devengado de Ingreso Afectación Patrimonial" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="cargoDIAPat" nombre="Cargo Devengado de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '4'+%obSeparador.obSeparador.caracter%+
					                    '0'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_cargo" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '4'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/>
                        </tabla>
                    </componente>
                </nivel>
                
                <nivel id="abonoDIAPat" nombre="Abono Devengado de Ingreso Afectación Patrimonial" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="abonoDIAPat" nombre="Abono Devengado de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '2'+%obSeparador.obSeparador.caracter%+
					                    '0'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '2'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/> 
                        </tabla>
                    </componente>
                </nivel>
                
                <nivel id="cargoRIAPat" nombre="Cargo Recaudo de Ingreso Afectación Patrimonial" interactivo="false" ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="cargoRIAPat" nombre="Cargo Recaudo de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '4'+%obSeparador.obSeparador.caracter%+
					                    '0'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_cargo" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '4'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/>       
                        </tabla>
                    </componente>
                </nivel>
                
                <nivel id="abonoRIAPat" nombre="Abono Recaudo de Ingreso Afectación Patrimonial" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="abonoRIAPat" nombre="Abono Recaudo de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '5'+%obSeparador.obSeparador.caracter%+
					                    '0'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '5'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/>        
                        </tabla>
                    </componente>
                </nivel>-->
                
                <!-- FIN Afectacion PATRIMONIAL-->
                
                 <!-- AFECTACION A CLAVE PRESUPUESTAL DEVENGADO y RECAUDADO SUMA-->
                <nivel id="ACP" nombre="Afectación a clave presupuestal" interactivo="false" ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true AND %detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%!=null"> 
                    <componente id="ACP" nombre="Barre Presupuesto de Egresos Mensual" tipo="cursor">
                        <tabla schema="operation" nombre="gestion_leyingreso_mes_det">
                            <campo name="ur" filtroCampo="ur" filtroOperador="=" filtroValor="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/> 
                            <campo name="id_periodo" filtroCampo="id_periodo" filtroOperador="=" filtroValor="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/> 
                            <campo name="clave_presupuestal" filtroCampo="clave_presupuestal" filtroOperador="=" filtroValor="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                            <campo name="mes" filtroCampo="mes" filtroOperador="=" filtroValor="@fechaSistema(&quot;MM&quot;)"/> 
                            <campo name="presupuesto_devengado" calc="@consultaDirec('SELECT '+%ACP.ACP.presupuesto_devengado%+' + '+ %detallesPolizaRPINv.detallesPolizaRPICp.total%+' AS suma','suma','numeric','MAGNITUS')"/>
                            <campo name="presupuesto_recaudado" 
                            calc="@consultaDirec('SELECT '+%ACP.ACP.presupuesto_recaudado%+' + '+%detallesPolizaRPINv.detallesPolizaRPICp.total%+' AS suma','suma','numeric','MAGNITUS')
                             + "/>
                        </tabla>
                    </componente>
                </nivel>
                
                
                
               
                
                <!-- CARGO DEVENGADO INGRESO (AFECTACIÓN PRESUPUESTAL)--> 
                <nivel id="cargoDIAPre" nombre="Cargo Devengado de Ingreso Afectación Presupuestal" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="cargoDIAPre" nombre="Cargo Devengado de Ingreso Afectación Presupuestal" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
                                        '1'+%obSeparador.obSeparador.caracter%+
                                        '2'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '001'+%obSeparador.obSeparador.caracter%+
                                        '01'+%obSeparador.obSeparador.caracter%+
                                        '001')" />
					       <campo name="importe_cargo" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque" calc="'RECLASIFICACIÓN DE INGRESO'"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '2'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="1"/>          
                        </tabla>
                    </componente>
                </nivel>
                
                <!-- ABONO DEVENGADO INGRESO (AFECTACIÓN PRESUPUESTAL)-->
                <nivel id="abonoDIAPre" nombre="Abono Devengado de Ingreso Afectación Presupuestal" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="abonoDIAPre" nombre="Abono Devengado de Ingreso Afectación Presupuestal" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
                                        '1'+%obSeparador.obSeparador.caracter%+
                                        '4'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '001'+%obSeparador.obSeparador.caracter%+
                                        '01'+%obSeparador.obSeparador.caracter%+
                                        '001')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"  calc="'RECLASIFICACIÓN DE INGRESO'" />
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '4'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="1"/>         
                        </tabla>
                    </componente>
                </nivel>
                
                <!-- CARGO RECAUDO INGRESO (AFECTACIÓN PRESUPUESTAL) -->
                <nivel id="cargoRIAPre" nombre="Cargo Recaudo de Ingreso Afectación Presupuestal" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="cargoRIAPre" nombre="Cargo Recaudo de Ingreso Afectación Presupuestal" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
                                        '1'+%obSeparador.obSeparador.caracter%+
                                        '4'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '001'+%obSeparador.obSeparador.caracter%+
                                        '01'+%obSeparador.obSeparador.caracter%+
                                        '001')" />
					       <campo name="importe_cargo" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque"  calc="'RECLASIFICACIÓN DE INGRESO'"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '4'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="1"/>        
					       <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                        </tabla>
                    </componente>
                </nivel>
                
                
                 <!-- ABONO RECAUDO INGRESO (AFECTACIÓN PRESUPUESTAL) -->
                <nivel id="abonoRIAPre" nombre="Abono Recaudo de Ingreso Afectación Presupuestal" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.ur%!=null">
                    <componente id="abonoRIAPre" nombre="Abono Recaudo de Ingreso Afectación Presupuestal" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('8'+%obSeparador.obSeparador.caracter%+
                                        '1'+%obSeparador.obSeparador.caracter%+
                                        '5'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '0'+%obSeparador.obSeparador.caracter%+
                                        '001'+%obSeparador.obSeparador.caracter%+
                                        '01'+%obSeparador.obSeparador.caracter%+
                                        '001')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%" />
					       <campo name="concepto_bloque" calc="'RECLASIFICACIÓN DE INGRESO'"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('8'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '5'+%obSeparador.obSeparador.caracter%+
					                '0'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="1"/>         
                        </tabla>
                    </componente>
                </nivel>
                
                <!-- Poliza de Afectación Patrimonial-->
                
                <!-- CARGO RECAUDO INGRESO (AFECTACIÓN PATRIMONIAL) 
                <nivel id="cargoRIAPAT" nombre="Cargo Recaudo de Ingreso Afectación Patrimonial" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.folio_duri_pres_detalle%==1">
                    <componente id="cargoRIAPAT" nombre="Cargo Recaudo de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('4'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '7'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%*-1" />
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('4'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '7'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/>          
					       <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                        </tabla>
                    </componente>
                </nivel>
                -->
                
                 <!-- ABONO RECAUDO INGRESO (AFECTACIÓN PATRIMONIAL) 
                <nivel id="abonoRIAPAT" nombre="Abono Recaudo de Ingreso Afectación Patrimonial" interactivo="false" 
                       ejecutar="%detallesPolizaRPINv.detallesPolizaRPICp.folio_duri_pres_detalle%==1">
                    <componente id="abonoRIAPAT" nombre="Abono Recaudo de Ingreso Afectación Patrimonial" tipo="altaDirect">
                        <tabla schema="operation" nombre="detalle_movimientos_auxiliares">
                            <campo name="ur" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                            <campo name="id_periodo" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%"/>
                            <campo name="id_movimiento_auxiliar" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                            <campo name="id_detalle_movimiento_auxiliar" generacion="@prox()+1" autogenerado="true"/>
                            
                            <campo name="clave_cuenta_contable" 
					               calc="@concatenar('4'+%obSeparador.obSeparador.caracter%+
					                    '1'+%obSeparador.obSeparador.caracter%+
					                    '7'+%obSeparador.obSeparador.caracter%+
					                    '3'+%obSeparador.obSeparador.caracter%+'0')" />
					       <campo name="importe_abono" calc="%detallesPolizaRPINv.detallesPolizaRPICp.total%"/>
					       <campo name="concepto_bloque"/>
					       <campo name="referencia" calc="@consultaDirec('SELECT descripcion FROM catalog.cuentas_contables
					                WHERE clave_cuenta ='+'\\''+ @concatenar('4'+%obSeparador.obSeparador.caracter%+
					                '1'+%obSeparador.obSeparador.caracter%+
					                '7'+%obSeparador.obSeparador.caracter%+
					                '3'+%obSeparador.obSeparador.caracter%+'0') +'\\'','descripcion','string','MAGNITUS');"/>
					       <campo name="fecha_registro" calc="@fechaSistema()" />
					       <campo name="ultimo_usuario_modificador" calc="%barreUsuarios.barreUsuarios.id_usuario%"/>
					       <campo name="tipo_detalle" calc="2"/>         
					       <campo name="clave_presupuestal" calc="%detallesPolizaRPINv.detallesPolizaRPICp.clave_presupuestal%"/>
                        </tabla>
                    </componente>
                </nivel>
                --> 
                <!--  Fin de Poliza de Afectación Patrimonial-->
                
                
            </componente>
        </nivel>
        <!-- /PÓLIZA DE RECLACIFICACIÓN PRESUPUESTAL DEL INGRESO -->
        
        <!-- MENSAJE POST-AUTORIZACIÓN 
        <nivel id="mensajeAutorizado" nombre="Autoriza Reclasificación del Ingreso" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true"
               mostrarNivelAnterior="false" mostrarProximoNivel="true" >
            <componente id="mensajeAutorizado" nombre="Autoriza Reclasificación del Ingreso" tipo="formulario">
                <tabla schema="catalog" nombre="dummy">
                    <campo name="id" calc="1" visible="false"/>
                    <etiqueta nombre="exito" texto="La autorización sucedió con éxito" color="Black" bold="normal" 
                              columnas="6" margen-izquierdo="2" margen-derecho="2" tamaño="50px" alineacion="center" 
                              interlineado="25px" width="500px"/>
                </tabla>
                <estilos>
                    <boton nombre="grabar" visible="false" texto="Continuar" />
                 </estilos>
                <acciones>
                    <accion nombre="grabar" hacer="saltar siguiente nivel"/>
                </acciones>
            </componente>
        </nivel>
        -->
        
        <!-- REPORTES DE PÓLIZAS -->
        <nivel id="reportePol" nombre="Póliza Reclasificación Presupuestal del Ingreso" ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true" mostrarProximoNivel="true" mostrarNivelAnterior="false">
            <!-- REPORTE PÓLIZA RECLASIFICACIÓN PRESUPUESTAL DEL INGRESO -->
            <componente id="reportePolRPI" nombre="Póliza de Reclasificación del Ingreso" tipo="reporte">
                <reporte nombre="poliza_contable" expediente="Expediente de Ingresos/Reclasificación del Ingreso" nombreDocumento="'Póliza de Reclasificación'" grupo="$inParam.folio_ingreso$" url="$config.repository_upload_file$" update="true">
                    <campo name="ur" type="long" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.ur%"/>
                    <campo name="periodo" type="long" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.periodo%" />
                    <campo name="folio_movimiento_auxiliar" type="long" calc="%encabezadoPolizaRPI.encabezadoPolizaRPI.folio_movimiento_auxiliar%"/>
                </reporte>
            </componente>
            
            <!-- REPORTE PÓLIZA DEL PRESUPUESTO DE INGRESOS DEVENGADO  
            <componente id="reportePolPID" nombre="Póliza del Presupuesto de Ingresos Devengado" tipo="reporte">
                <reporte nombre="poliza">
                    <campo name="ur" type="long" calc="%encabezadoPolizaDevIng.encabezadoPolizaDevIng.ur%"/>
                    <campo name="periodo" type="long" calc="%encabezadoPolizaDevIng.encabezadoPolizaDevIng.periodo%" />
                    <campo name="folio_movimiento_auxiliar" type="long" calc="%encabezadoPolizaDevIng.encabezadoPolizaDevIng.folio_movimiento_auxiliar%"/>
                </reporte>
            </componente>
            -->
            <!-- REPORTE PÓLIZA DEL PRESUPUESTO DE INGRESOS RECAUDADO  
            <componente id="reportePolPIR" nombre="Póliza del Presupuesto de Ingresos Recaudado" tipo="reporte">
                <reporte nombre="poliza">
                    <campo name="ur" type="long" calc="%encabezadoPolizaRecIng.encabezadoPolizaRecIng.ur%"/>
                    <campo name="periodo" type="long" calc="%encabezadoPolizaRecIng.encabezadoPolizaRecIng.periodo%" />
                    <campo name="folio_movimiento_auxiliar" type="long" calc="%encabezadoPolizaRecIng.encabezadoPolizaRecIng.folio_movimiento_auxiliar%"/>
                </reporte>
            </componente>
            -->
        </nivel>
        
         <!-- TURNAR INSTANCIA (TERMINAR EN CASO DE AUTORIZAR) -->  
        <nivel id="turnarInstanciaP" nombre="turnarInstanciaP" interactivo="false" 
               ejecutar="%formularioAutRecPresIngNv.formularioAutRecPresIngCp.autoriza%==true">
            <componente id="enlaceDynamo" nombre="Enlace con dynamo" tipo="solicitud">
                <parametros url="$config.request$" metodo="POST" accion="turnarInstancia" tipo="json">
                    <parametro name="enterprise" calc="$protocolarios.enterprise$"/>
                    <parametro name="process" calc="$protocolarios.process$"/>
                    <parametro name="version" calc="$protocolarios.version$"/>
                    <parametro name="instance" calc="$protocolarios.instance$"/>
                    <parametro name="user" calc="$protocolarios.user$"/>
                    <parametro name="url" calc="$protocolarios.url$"/>
                </parametros>
            </componente>
        </nivel>
        
 
    </pagina>
</tarea>